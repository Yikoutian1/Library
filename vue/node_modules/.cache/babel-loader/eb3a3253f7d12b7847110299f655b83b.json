{"ast":null,"code":"import Cookies from 'js-cookie';\nimport request from \"@/utils/request\";\nimport * as echarts from 'echarts';\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: [] // 从后台动态获取\n\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    name: '借书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: [] // 从后台动态获取\n\n  }, {\n    name: '还书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: [] // 从后台动态获取\n\n  }]\n};\nexport default {\n  data() {\n    return {\n      admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n      lineBox: null,\n      timeRange: 'week',\n      options: [{\n        label: '最近一周',\n        value: 'week'\n      }, {\n        label: '最近一个月',\n        value: 'month'\n      }, {\n        label: '最近两个月',\n        value: 'month2'\n      }, {\n        label: '最近三个月',\n        value: 'month3'\n      }]\n    };\n  },\n\n  mounted() {\n    // 等页面元素全部初始化好\n    this.load();\n  },\n\n  methods: {\n    load() {\n      if (!this.lineBox) {\n        this.lineBox = echarts.init(document.getElementById('line')); // 初始化echarts容器\n      } // 从后台获取数据\n\n\n      request.get('/borrow/lineCharts/' + this.timeRange).then(res => {\n        option.xAxis.data = res.data.date;\n        option.series[0].data = res.data.borrow;\n        option.series[1].data = res.data.retur;\n        this.lineBox.setOption(option); // 设置容器的属性值，当你的数据发生变化的时候，一定要重新setOption\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmBA;AACA;AACA;AAEA;EACAA;IACAC;EADA,CADA;EAIAC;IACAC;EADA,CAJA;EAOAC;IACAC;EADA,CAPA;EAUAC;IACAC,UADA;IAEAC,WAFA;IAGAC,YAHA;IAIAC;EAJA,CAVA;EAgBAC;IACAC;MACAC;IADA;EADA,CAhBA;EAqBAC;IACAC,gBADA;IAEAC,kBAFA;IAGAX,QAHA,CAGA;;EAHA,CArBA;EA0BAY;IACAF;EADA,CA1BA;EA6BAG,SACA;IACAC,YADA;IAEAJ,YAFA;IAGAK,cAHA;IAIAC,YAJA;IAKAhB,QALA,CAKA;;EALA,CADA,EAQA;IACAc,YADA;IAEAJ,YAFA;IAGAK,cAHA;IAIAC,YAJA;IAKAhB,QALA,CAKA;;EALA,CARA;AA7BA;AA+CA;EACAA;IACA;MACAiB,mEADA;MAEAC,aAFA;MAGAC,iBAHA;MAIAC,UACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA;IAJA;EAWA,CAbA;;EAcAC;IAAA;IACA;EACA,CAhBA;;EAiBAC;IACAC;MACA;QACA,6DADA,CACA;MACA,CAHA,CAIA;;;MACAC;QACAC;QACAA;QACAA;QACA,+BAJA,CAIA;MACA,CALA;IAMA;;EAZA;AAjBA","names":["title","text","tooltip","trigger","legend","data","grid","left","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","type","boundaryGap","yAxis","series","name","stack","smooth","admin","lineBox","timeRange","options","label","value","mounted","methods","load","request","option"],"sourceRoot":"src/views/home","sources":["HomeView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"margin: 20px 0\">\r\n      <el-select class=\"input\" v-model=\"timeRange\" placeholder=\"请选择\" @change=\"load\">  <!--  从后台加载最新的数据 -->\r\n        <el-option\r\n            v-for=\"item in options\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n    <el-card>\r\n      <div id=\"line\" style=\"width: 100%; height: 400px\"></div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from 'js-cookie'\r\nimport request from \"@/utils/request\";\r\nimport * as echarts from 'echarts'\r\n\r\nconst option = {\r\n  title: {\r\n    text: '图书借还统计'\r\n  },\r\n  tooltip: {\r\n    trigger: 'axis'\r\n  },\r\n  legend: {\r\n    data: ['借书数量', '还书数量']\r\n  },\r\n  grid: {\r\n    left: '3%',\r\n    right: '4%',\r\n    bottom: '3%',\r\n    containLabel: true\r\n  },\r\n  toolbox: {\r\n    feature: {\r\n      saveAsImage: {}\r\n    }\r\n  },\r\n  xAxis: {\r\n    type: 'category',\r\n    boundaryGap: false,\r\n    data: []  // 从后台动态获取\r\n  },\r\n  yAxis: {\r\n    type: 'value'\r\n  },\r\n  series: [\r\n    {\r\n      name: '借书数量',\r\n      type: 'line',\r\n      stack: 'Total',\r\n      smooth: true,\r\n      data: []     // 从后台动态获取\r\n    },\r\n    {\r\n      name: '还书数量',\r\n      type: 'line',\r\n      stack: 'Total',\r\n      smooth: true,\r\n      data: []     // 从后台动态获取\r\n    }\r\n  ]\r\n}\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\r\n        lineBox: null,\r\n        timeRange: 'week',\r\n        options: [\r\n          {label: '最近一周', value: 'week'},\r\n          {label: '最近一个月', value: 'month'},\r\n          {label: '最近两个月', value: 'month2'},\r\n          {label: '最近三个月', value: 'month3'},\r\n        ]\r\n      }\r\n    },\r\n    mounted() {  // 等页面元素全部初始化好\r\n      this.load()\r\n    },\r\n    methods: {\r\n      load() {\r\n        if (!this.lineBox) {\r\n          this.lineBox = echarts.init(document.getElementById('line'))  // 初始化echarts容器\r\n        }\r\n        // 从后台获取数据\r\n        request.get('/borrow/lineCharts/' + this.timeRange).then(res => {\r\n          option.xAxis.data = res.data.date\r\n          option.series[0].data = res.data.borrow\r\n          option.series[1].data = res.data.retur\r\n          this.lineBox.setOption(option)  // 设置容器的属性值，当你的数据发生变化的时候，一定要重新setOption\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n.input {\r\n  width: 300px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}